# Database Service

The Database Service mimics an actual database in the simplest form in which fixed values are returned when sending HTTP requests to the respective endpoints of the Database Service. The response here may vary and is freely adjustable by the user who is given the freedom to choose between the type of a certain response. We discern between the successfull and the erroneous response type. Not only the response itself can be altered, but the response time is also modifiable. Moreover, the Database Service exposes endpoints that can be scraped to obtain the actual cpu utilization and a simulated value which can also be regulated.

## Installation and setup

The Database Service comprises a frontend and backend component. It is advised to run both the frontend and backend at the same time to facilitate and update the adjustment of the responses. 

[How to set up Database Service backend](https://github.com/ccims/database-service/blob/dev/database-service/README.md) \
[How to set up Database Service frontend](https://github.com/ccims/database-service/blob/dev/database-serviceui/README.md)

## Pictures

The User Interface of the Database Service
![DatabaseServiceUI](https://github.com/ccims/database-service/blob/dev/database-serviceui/documentation/databaseserviceui.PNG?raw=true)

## Functionalities
The functionality of the Database Service can be split up into two parts: The provision of endpoints from which defined values can be retrieved as responses for HTTP requests and the feature enabling adjustments of the responses, including response time, response type - successful or erroneous - as well as semantical correctness.

### Provision of Endpoints 
Once up and running on localhost:3000, the Database Service backend exposes various endpoints open for HTTP requests. Under localhost:3000/api a list populated with the array of endpoints of the Database Service can be observed. This list is generated by the Swagger IO. The corresponding Swagger JSON file can be obtained under localhost:3000/api-json. Nonetheless, this section contains a list of all endpoints and their respective elaboration. 

#### GET endpoints:
* **/** \
  Successful response type: Returns the status of the Database Service backend. \
  Erroneous response type: Rejects the request.

* **/cpu** \
  Successful response type:  Returns the actual cpu utilization. \
  Erroneous response type: Rejects the request.
  
* **/cpu/simulated** \
  Successful response type:  Returns a simulated cpu utilization value. \
  Erroneous response type: Rejects the request.

* **/account-worth** \
  Successful response type:  Returns a fixed simulated account worth value. \
  Erroneous response type: Rejects the request.
  
* **/request-handler/balance** \
  Semantically correct response type:  Returns the number 31. \
  Semantically incorrect response type: Returns the name "Jeff".
  
* **/request-handler/customer-name** \
  Semantically correct response:  Returns the name "Jeff". \
  Semantically incorrect response: Returns the number 31.
  
#### POST endpoints:  

* **/request-handler/add-customer** \
  Semantically correct response: Returns: "Customer [post body] successfully added!" \
  Semantically incorrect response: In this case, the POST request is rejected. A error message is returned.

### Adjustment of Response Properties
The interface of the Database Service renders the adjustment features which encompass the response type, the semantical correct of the response, the response time or response delay and lastly the simulated cpu utilization. Whereas the response time applies to all endpoints, the response type is particular for those endpoints whose descriptions explicitly state the effects of the types. Analogously, the semantical correctness too is particular to the endpoints that describe the corresponding response in their description. 

The two checkboxes allow the user to set their desired response type and semantical correctness. A ticked checkbox implies the successful response type/semantical correctness. Conversely, an empty checkbox denotes the erroneous response type/semantical incorrectness. \

![DatabaseServiceUI ResponseType Checkbox](https://github.com/ccims/database-service/blob/dev/database-serviceui/documentation/response_success_control.PNG?raw=true)

![DatabaseServiceUI SemanticalCorrectness Checkbox](https://github.com/ccims/database-service/blob/dev/database-serviceui/documentation/semantical_correctness_control.PNG?raw=true)

The simulated CPU utilization value as well as the response time can be specified in their respective input fields. \

![DatabaseServiceUIInputField](https://github.com/ccims/database-service/blob/dev/database-serviceui/documentation/input_databaseservice.PNG?raw=true)

The changes are applied once the "Apply" button is clicked.

![DatabaseServiceUIApplyButton](https://github.com/ccims/database-service/blob/dev/database-serviceui/documentation/apply_databaseservice.PNG?raw=true)

## Additional Information

In our Monitoring Environemnt, the Database Service is queried by the Price Service and the Error-Response Monitor. The Price Service may query all endpoints while the Error-Response Monitor conducts an end-to-end monitor check with the aid of the /request-handler/... endpoints by probing the semantical correctness of the responses.
